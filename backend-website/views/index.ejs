<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/index.css">
    <title>Document</title>
</head>
<body>
  
    <div class="admin_upload_file">
      <div class="image-section">
        <div class="heading_user"><span class="heading_span">Hello Users</span><br>
           Give your valuable feedbacks for shubh-dental clinics</div>
        <img src="assets/review.jpg" alt=""  width="600px">
      </div>
        <form class="form-patients">
          <label for="name">Name </label>
          <input type="text" id = "name">
          <br>
          <br>
          <label for="upl">Upload your photo</label>
          <br>
         
            <input type="file" id="upl" name = "upl">
            
          <br>
          <br>
          <label for="review">Review</label>
          <!-- <input type="text" id = "review"> -->
          <textarea id = "review"></textarea>
          <br>
          <button type="Submit" id="btn">Submit</button>
        </form>
       
    
    
    <script>
      
      // const nameuser = document.getElementById("name");
      // const review = document.getElementById("review");
      // const btn = document.getElementById("btn");
      // const submitHandler = (e)=>{
      //   e.preventDefault();
      //   const reqBody = {
      //     "nameuser":nameuser.value,
      //      "review":review.value
      //   }
      //   axios.post("http://localhost:3000/review",reqBody).then((res)=>{
      //     return res.status(200).json({message:"review Sent Successfully"});
      //   }).catch((err)=>{console.log(err)});
      // }
      // btn.addEventListener("click",submitHandler);
      const nameuser = document.getElementById("name");
const review = document.getElementById("review");
const fileInput = document.getElementById("upl"); // Change the ID to match the form input

const btn = document.getElementById("btn");
const submitHandler = (e) => {
  e.preventDefault();

  const formData = new FormData();
  formData.append("nameuser", nameuser.value);
  formData.append("review", review.value);
  formData.append("upl", fileInput.files[0]); // Access the file input and get the first selected file

  axios.post("http://localhost:3000/review", formData, {
    headers: {
      "Content-Type": "multipart/form-data", // Set the content type to multipart/form-data
    },
  })
  .then((res) => {
    console.log(res.data);
  })
  .catch((err) => {
    console.log(err);
  });
  nameuser.value = "";
  review.value = "";
  fileInput.value = "" ;
  
}

btn.addEventListener("click", submitHandler);
    </script>
  
</body>
</html>